[{id69a420a3.9a70c,typetab,labelSavePI Home Security,disabledfalse,infoSavePI Home SecuritynProject #01},{idd9cc5f0f.e130e,typemqtt in,z69a420a3.9a70c,name,topicsecurity_monitorsystemstatus,qos0,broker284e5551.149f1a,x160,y80,wires[[42be2553.51897c]]},{id42be2553.51897c,typerbe,z69a420a3.9a70c,name,funcrbe,gap,start,inoutout,propertypayload,x150,y160,wires[[4e2f7a0c.c18184]]},{id4e2f7a0c.c18184,typefunction,z69a420a3.9a70c,nameToggle SystemStatus,funcvar state = global.get('state')  '0';nnif (msg.payload === '0') {n    if (state === '0') {n        global.set('state', '1');n    } else {n        global.set('state', '0');n    }n}nnmsg.payload=global.get('state');nnreturn msg;,outputs1,noerr0,x210,y240,wires[[cefa1af2.f46d78]]},{idcdca4de1.76607,typemqtt out,z69a420a3.9a70c,name,topicsecurity_monitorledredset,qos0,retain,broker77293117.a8a4b,x600,y460,wires[]},{id99b5905c.5f131,typemqtt out,z69a420a3.9a70c,name,topicsecurity_monitorledgreenset,qos0,retain,broker77293117.a8a4b,x610,y620,wires[]},{idaea81695.3bf348,typemqtt in,z69a420a3.9a70c,name,topicsecurity_devicesa0,qos0,broker77293117.a8a4b,x150,y340,wires[[21e1a3f8.6c0ccc]]},{id6840ffa4.3281a,typemqtt in,z69a420a3.9a70c,name,topicsecurity_devicesalarm,qos0,broker77293117.a8a4b,x160,y400,wires[[21e1a3f8.6c0ccc]]},{id21e1a3f8.6c0ccc,typefunction,z69a420a3.9a70c,nameSave alarm state,funccontext.laser = context.laser  '0';ncontext.trigger = context.trigger  '0';nnif (msg.topic === 'security_devicesa0') {n  context.laser = msg.payload;n} else if (msg.topic === 'security_devicesalarm') {n  context.trigger = msg.payload;n}nnif (context.trigger === '1'  context.laser === '1') {n  global.set('alarm', '1');n} else {n  global.set('alarm', '0');n}nreturn msg;,outputs1,noerr0,x450,y340,wires[[d952ef1a.b55b9]]},{idd952ef1a.b55b9,typefunction,z69a420a3.9a70c,nameSend status,funcmsg.alarm=global.get('alarm')  '0';nmsg.state=global.get('state')  '0';nreturn msg;,outputs1,noerr0,x690,y340,wires[[c41d3ff7.d6bb6,83090745.2280c8]]},{idc41d3ff7.d6bb6,typefunction,z69a420a3.9a70c,nameHandle alarm on and system on,funcif (msg.alarm === '1' && msg.state === '1') {n    msg.payload = '1';n} else {n    msg.payload = '0';n}nreturn msg;,outputs1,noerr0,x190,y500,wires[[cdca4de1.76607,51f78577.e9d7cc]]},{id83090745.2280c8,typefunction,z69a420a3.9a70c,nameHandle alarm off and system on,funcif (msg.alarm === '0' && msg.state === '1') {n    msg.payload = '1';n} else {n    msg.payload = '0';n}nreturn msg;,outputs1,noerr0,x190,y600,wires[[99b5905c.5f131]]},{id51f78577.e9d7cc,typemqtt out,z69a420a3.9a70c,name,topicsecurity_monitorspeakerset,qos0,retain,broker77293117.a8a4b,x600,y540,wires[]},{idcefa1af2.f46d78,typefunction,z69a420a3.9a70c,nameSave SystemStatus,funcif (msg.payload === '1') {n    msg.payload = '1';n} else {n    msg.payload = '0';n    global.set('alarm', '0');n}nglobal.set('state', msg.payload);nreturn msg;,outputs1,noerr0,x670,y240,wires[[d952ef1a.b55b9,40cbd64b.a0b308]]},{id40cbd64b.a0b308,typeui_switch,z69a420a3.9a70c,name,labelSystem Status,group2b638b6.5742574,order0,width0,height0,passthrufalse,decoupletrue,topic,style,onvalue1,onvalueTypestr,onicon,oncolor,offvalue0,offvalueTypestr,officon,offcolor,x440,y140,wires[[cefa1af2.f46d78]]},{id284e5551.149f1a,typemqtt-broker,z,brokerlocalhost,port1883,clientid,usetlsfalse,compatmodetrue,keepalive60,cleansessiontrue,birthTopic,birthQos0,birthPayload,willTopic,willQos0,willPayload},{id77293117.a8a4b,typemqtt-broker,z,brokerlocalhost,port1883,clientid,usetlsfalse,compatmodetrue,keepalive60,cleansessiontrue,birthTopic,birthQos0,birthPayload,willTopic,willQos0,willPayload},{id2b638b6.5742574,typeui_group,z,nameSavePI Home Security,tab23ebb795.f9f868,order1,disptrue,width6,collapsefalse},{id23ebb795.f9f868,typeui_tab,z,nameSavePI Home Security,icondashboard,order3}]